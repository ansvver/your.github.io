<script src="{{ ASSET_PATH }}geekeeper/js/jquery.min.js"></script>

<style type="text/css">
	.init_box {
		width: 60px; 
		height: 60px; 
		margin: 10px; 
		float: left; 
		background-color: yellow;
		text-align:center;
		line-height: 60px;
		font-size: xx-small;
	}
	.select_box {
		border-width: 2px;
		border-color: red;
		border-style: solid;
	}
	.help_box {
		background-color: green;
		color: white;
	}

.btn { display: block; position: relative; background: #aaa; padding: 5px; float: left; color: #fff; text-decoration: none; cursor: pointer; }
.btn * { font-style: normal; background-image: url(btn2.png); background-repeat: no-repeat; display: block; position: relative; }
.btn i { background-position: top left; position: absolute; margin-bottom: -5px;  top: 0; left: 0; width: 5px; height: 5px; }
.btn span { background-position: bottom left; left: -5px; padding: 0 0 5px 10px; margin-bottom: -5px; }
.btn span i { background-position: bottom right; margin-bottom: 0; position: absolute; left: 100%; width: 10px; height: 100%; top: 0; }
.btn span span { background-position: top right; position: absolute; right: -10px; margin-left: 10px; top: -5px; height: 0; }

* html .btn span,
* html .btn i { float: left; width: auto; background-image: none; cursor: pointer; }

.btn.blue { background: #2ae; }
.btn.green { background: #9d4; }
.btn.pink { background: #e1a; }
.btn:hover { background-color: #a00; }
.btn:active { background-color: #444; }
.btn[class] {  background-image: url(shade.png); background-position: bottom; }

* html .btn { border: 3px double #aaa; }
* html .btn.blue { border-color: #2ae; }
* html .btn.green { border-color: #9d4; }
* html .btn.pink { border-color: #e1a; }
* html .btn:hover { border-color: #a00; }


</style>

<script type="text/javascript">
	var win_num = 0;
	var lost_num = 0;
	var game_num = 0;

	var $newbox = $( "<div class='a'/>" ).html("点击选择").addClass("init_box");

	function newGame(){
		game_num++;
		var i;
		var i_id;
		var prise = parseInt(Math.random() * 3);

		for(i=0; i<3; i++) {
			i_id = game_num + "" + i;
			$newbox.attr("id", i_id);
			if(prise == i) {
				$("#game").append($newbox.clone().addClass("prise"));
			} else {
				$("#game").append($newbox.clone());
			}
		}

		$("#game").append("<br/>");

		$("#game").delegate(".a","click",function(){
			$(this).addClass("select_box").html("我选这个");
			
			//产生一个随机数1或2
			var re = parseInt(Math.random() * 2) + 1;
			var help_id;
			var change_id;
			var next_id;

			var this_id = $(this).attr("id");
			var index = this_id.substring(this_id.length - 1, this_id.length);


			if( $(this).hasClass("prise") ) {
				help_id = game_num + "" + ((parseInt( index ) + re) % 3);
				change_id = game_num + "" + ((parseInt( index ) + (re % 2 ) + 1 ) % 3);
			} else {
				next_id = game_num + "" + ((parseInt( index ) + 1) % 3);
				if( $("#" + next_id).hasClass("prise") ) {
					help_id = game_num + "" + ((parseInt( index ) + 2) % 3);
					change_id = next_id;
				} else {
					help_id = next_id;
					change_id = game_num + "" + ((parseInt( index ) + 2) % 3);	
				}
			}
			$("#" + help_id).addClass("help_box").html("木有");		
			$("#" + change_id).html("???");	
			//$("#" + help_id).animate({outlineWidth:"10px"}, "slow").animate({outlineWidth:"0px"}, "slow");

			$(".a").removeClass("a");

			$("#game").append("<div style='clear:both;'>To 换 or Not To 换?<button class='change'>换换更健康</button><button class='not_change'>换你妹夫啊</button></div><br/>");
			$("#game").append("<div><a href="#" class="btn blue">This is a blue button</a><a href="#" class="btn green">This should be a green button</a></div>")

		});
		
	}

	
	$(document).ready(function(){
		$("#go").click(function(){
			$("#go").hide();
			newGame();
		});
	});
	
</script>

<div id="game">
	<input type="button" id="go" value="开始游戏"></button>
</div>

<br/>
